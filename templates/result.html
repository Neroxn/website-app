
{% extends "base.html" %}
{% block title %} {% endblock %}

{% block head %}
  <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/result.css') }}">
{% if graphSelected %}
  {{ js_resources|indent(4)|safe }}
  {{ css_resources|indent(4)|safe }}
  {{ plot_script|indent(4)|safe }}
{% endif %}

{% endblock %}



{% block page_content %}

<div class="scrollmenu">
  <table>
      <tr>
          {% for col in column_names %}
          <th>{{col}}</th>
          {% endfor %}
      </tr>
      {% for row in row_data %}
      <tr>
          {% for col, row_ in zip(column_names, row) %}
          {% if col == link_column %}
          <td>
              <button type="submit" value={{ row_ }} name="person_id" form="patient_form" class="patient_button">
                  {{ row_ }}
              </button>
          </td>
          {% else %}
          <td>{{row_}}</td>
          {% endif %}
          {% endfor %}
      </tr>
      {% endfor %}
  
  </table>
</div>

<a href="{{ url_for('download_csv',path = path) }}">Click here to download test results as csv file.</a>

<div class="metrics">
  {% if model_scores %}
  Computed model score for the test data.
  <p>
    {% for model_score in model_scores %}
      {{ model_score }}
    {% endfor %}  
  </p>
  {% endif %}
  </div>

<div class="metrics">
  {% if mse_errors %}
  Computed MSE (mean squared error) for the test data.
  <p>
    {% for mse in mse_errors %}
      {{ mse }}
    {% endfor %}  
  </p>
  {% endif %}
</div>

<div class="metrics">
{% if mae_errors %}
Computed MAE scores for the model.
  <p>
    {% for mae in mae_errors %}
      {{ mae }}
    {% endfor %}  
  </p>
{% endif %}
</div>

<div class="metrics">
  {% if log_errors %}
  Computed log-loss for the test data.
  <p>
    {% for log_error in log_errors %}
      {{ log_error }}
    {% endfor %}  
  </p>
  {% endif %}
</div>

<div class="metrics">
  {% if f1_scores %}
  Computed F1 Scores for the test data.
  <p>
    {% for f1_score in f1_scores %}
      {{ f1_score }}
    {% endfor %}  
  </p>
  {% endif %}
</div>

{% if graphSelected %}
<div style="display: flex; justify-content: center;">
  {{ plot_div|indent(4)|safe }}
</div>
{% endif %}

<div class='yazi'>
  <h1>Upload the file for prediction. </h1>
  <p><h3>Accepted files are TXT exported from Excel and CSV. </h3></p>
    <form action="" method=post enctype=multipart/form-data>
      <p><input type=file name=file>
      <p>Delimitter (default = ,) <input type = "text" name = "delimitter" /></p>
      <p>Qualifier (default = "") <input type = "text" name = "qualifier" /></p>
      <p>First row value types <input type="checkbox" name="is-value-type" value = 1 checked></p>
      <input type=submit value=Upload>
    </form>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static',filename='js/bar_plot.js') }}"></script>
{% endblock %}


